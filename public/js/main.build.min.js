!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a){this.options=a||{},this.x=this.options.x,this.y=this.options.y,this.radius=parseInt(5*Math.random()),this.color=this.getBWHex(),this.velocity={x:-8+10*Math.random(),y:-8+10*Math.random()}}c.prototype.getBWHex=function(){return"#"+(!(Math.random()+.5|0)==!0?"FFFFFF":"000000")},c.prototype.getColor=function(){return"#"+(16777215*Math.random()<<0).toString(16)},c.prototype.draw=function(a){a.fillStyle=this.color,a.beginPath(),a.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),a.fill(),a.closePath()},b.exports=c},{}],2:[function(a,b){var c=a("./Particle"),d=a("./util/cookie"),e=$("#canvas"),f=e[0],g=f.getContext("2d"),h=f.width=window.innerWidth,i=f.height=window.innerHeight;e.css({width:window.innerWidth,height:window.innerHeight});var j,k=[],l=150,m=1,n=15,o=n,p=function(a){this.score=0,this.started=!1,this.snakePieces=[],this.snakeFood=[],this.settings=$.extend({snakePixels:14,snakeSize:3,bot:!0},a),this.bot={},this.settings.bot&&this.enableBot(),this.DIRECTIONS={UP:0,DOWN:2,LEFT:3,RIGHT:1},this.direction=this.DIRECTIONS.RIGHT,this.dQueue=[],this.bindEvents()};p.prototype.start=function(){this.started=!0,this.create(),this.createFood(),this.play()},p.prototype.reset=function(){this.started=!1,this.score=0,this.dQueue=[],this.direction=this.DIRECTIONS.RIGHT,this.snakePieces=[],this.snakeFood=[],o=n,j&&clearTimeout(j)},p.prototype.restart=function(){this.saveGame(),this.reset(),this.start()},p.prototype.bindEvents=function(){$(document).keydown(this.keydown.bind(this)),$(window).on("resize",this.onResize.bind(this))},p.prototype.play=function(){this.started=!0,"function"==typeof this.animationLoop&&this.animationLoop()},p.prototype.pause=function(){this.started=!1},p.prototype.lose=function(){this.pause(),setTimeout(function(){this.restart()}.bind(this),2e3)},p.prototype.saveGame=function(){var a=d.get("hi-score"),b=this.score;if(this.bot.enabled){var c=d.get("bot-score");c&&this.score<c&&(b=c),d.set("bot-score",b)}else(!a||a&&this.score<a)&&(b=a?a:this.score,d.set("hi-score",b))},p.prototype.keydown=function(a){var b,c=[38,40,37,39];switch(this.bot&&-1!==c.indexOf(a.keyCode)&&this.disableBot(),a.keyCode){case 38:b=this.DIRECTIONS.UP;break;case 40:b=this.DIRECTIONS.DOWN;break;case 37:b=this.DIRECTIONS.LEFT;break;case 39:b=this.DIRECTIONS.RIGHT;break;case 66:this.enableBot();break;case 32:return void(this.started?this.pause():this.play());default:return}this.started&&this.dQueue[this.dQueue.length-1]!==b&&this.dQueue.push(b)},p.prototype.onResize=function(){var a=window.innerHeight,b=window.innerWidth;h=b,f.width=b,i=a,f.height=a,e.css({width:b,height:a})},p.prototype.create=function(){for(var a=0;a<this.settings.snakeSize;a++)this.snakePieces.push({x:0,y:20})},p.prototype.createFood=function(){this.snakeFood.push({x:Math.round(Math.random()*(h-this.settings.snakePixels)/this.settings.snakePixels),y:Math.round(Math.random()*(i-this.settings.snakePixels)/this.settings.snakePixels)})},p.prototype.drawLoop=function(){g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,f.width,f.height);var a=this.snakePieces[0].x,b=this.snakePieces[0].y,c=this._getDirection();switch(this.direction=c,this.bot&&this.bot.enabled&&(this.direction=this.getNextMove()),this.direction){case this.DIRECTIONS.RIGHT:a++;break;case this.DIRECTIONS.LEFT:a--;break;case this.DIRECTIONS.DOWN:b++;break;case this.DIRECTIONS.UP:b--}this.isWallCollision(a,b)&&this.lose(),this.isSelfCollision(a,b)&&this.lose();var d={};this.started&&(this.isFoodCollision(a,b)?(this.score++,this.score%2&&(o+=.5),this.removeFoodIfExists(a,b),this.createExpolosion(a,b),this.createFood(),d.x=a,d.y=b):(d=this.snakePieces.pop(),d.x=a,d.y=b),this.snakePieces.unshift(d)),this.drawSnake(),this.drawFood(),this.drawScoreboard()},p.prototype._getDirection=function(){for(var a;"undefined"==typeof a||(this.direction-a+4)%4==2;)a=this.dQueue.length>0?this.dQueue.shift():this.direction;return a},p.prototype.isWallCollision=function(a,b){var c=-1===b,d=a>=h/this.settings.snakePixels,e=b>=i/this.settings.snakePixels,f=-1===a;return c||d||e||f},p.prototype.isSelfCollision=function(a,b){for(var c=0;c<this.snakePieces.length;c++)if(this.snakePieces[c].x==a&&this.snakePieces[c].y==b)return!0;return!1},p.prototype.isFoodCollision=function(a,b){var c=!1;return this.snakeFood.forEach(function(d){a==d.x&&b==d.y&&(c=!0)}),c},p.prototype.removeFoodIfExists=function(a,b){var c=this;this.snakeFood.forEach(function(d,e){a==d.x&&b==d.y&&c.snakeFood.splice(e)})},p.prototype.drawScoreboard=function(){var a=20,b=1;480>=h&&(a=16,b=.65),g.font=a+"px 'HelveticaNeue-Light','Helvetica Neue Light','Helvetica Neue', Helvetica, sans-serif",g.fillText("Score: "+this.score,h-100*b,i-10),g.fillText("Hi-Score: "+(d.get("hi-score")||0),h-240*b,i-10),g.fillText("Bot-Score: "+(d.get("bot-score")||0),h-410*b,i-10)},p.prototype.drawSnake=function(){for(var a=0;a<this.snakePieces.length;a++){var b=this.snakePieces[a];this.drawPart(b.x,b.y)}},p.prototype.drawFood=function(){var a=this.settings.snakePixels;g.fillStyle="#ffffff",g.strokeStyle="#000000",this.snakeFood.forEach(function(b){g.fillRect(b.x*a,b.y*a,a,a),g.strokeRect(b.x*a,b.y*a,a,a)})},p.prototype.drawPart=function(a,b){var c=this.settings.snakePixels;g.fillStyle="#ffffff",g.strokeStyle="#000000",g.fillRect(a*c,b*c,c,c),g.strokeRect(a*c,b*c,c,c)},p.prototype.createExpolosion=function(a,b){for(var d=0;l>d;d++){var e=new c({x:a*this.settings.snakePixels,y:b*this.settings.snakePixels});k.push(e)}},p.prototype.animationLoop=function(){if(this.started){var a=this;j&&clearTimeout(j),j=setTimeout(function(){a.drawLoop.call(a),a.particleLoop.call(a),window.requestAnimationFrame(a.animationLoop.bind(a))},1e3/o)}},p.prototype.particleLoop=function(){k&&k.forEach(function(a,b){a.velocity.y+=m,a.x+=a.velocity.x,a.y+=a.velocity.y,a.draw(g),a.y>i&&k.splice(b)})},p.prototype.enableBot=function(){this.bot.enabled=!0},p.prototype.disableBot=function(){this.bot.enabled=!1},p.prototype.isSafeMove=function(a,b){if(2===Math.abs(this.direction-b))return!1;switch(b){case this.DIRECTIONS.UP:a.y--;break;case this.DIRECTIONS.DOWN:a.y++;break;case this.DIRECTIONS.RIGHT:a.x++;break;case this.DIRECTIONS.LEFT:default:a.x--}var c=!0;return this.snakePieces.forEach(function(b){b.x===a.x&&b.y===a.y&&(c=!1)}),c},p.prototype.getPrelimDirection=function(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);return c>d?a.x>b.x?this.DIRECTIONS.LEFT:this.DIRECTIONS.RIGHT:a.y<b.y||0===a.y?this.DIRECTIONS.DOWN:this.DIRECTIONS.UP},p.prototype.getNextMove=function(){for(var a=this.snakeFood[0],b={x:this.snakePieces[0].x,y:this.snakePieces[0].y},c=0,d=this.getPrelimDirection(b,a);!this.isSafeMove(b,d)&&c++<=4;)d=(d+1)%4;return d},b.exports=p},{"./Particle":1,"./util/cookie":4}],3:[function(a){var b=a("./Snake"),c={menuOpen:!1,snake:new b,start:function(){NProgress.done(),this.bindEvents(),setTimeout(function(){c.snake.start()},3e3)},toggleMenu:function(){$("#menu").slideToggle()},preloadImages:function(a,b){function c(){++d>=e&&b()}var d=0,e=0,f=a instanceof Array?[]:{};for(var g in a)e++,f[g]=new Image,f[g].src=a[g],f[g].onload=c,f[g].onerror=c,f[g].onabort=c},bindEvents:function(){$(window).focus(this.snake.play).blur(this.snake.pause),$(".js-menu").on("click",function(){c.toggleMenu()}),$(window).on("keydown",function(a){switch(a.keyCode){case 82:c.snake.restart();break;case 191:c.toggleMenu()}})}};$(document).ready(function(){c.preloadImages(["/assets/img/bg.jpg"],function(){c.start()})})},{"./Snake":2}],4:[function(a,b){b.exports={set:function(a,b,c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="expires="+d.toGMTString();document.cookie=a+"="+b+"; "+e},get:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].trim();if(0===d.indexOf(a))return d.substring(a.length,d.length)}return!1}}},{}]},{},[3]);