!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("./util/cookie"),d=function(a){if(this.started=!1,this.score=0,this.settings=$.extend({inst:!1},a),this.inst=this.settings.inst,!this.inst)throw new Error("A Game Instance Must Be Supplied");this.$scoreboard=$("#scoreboard"),this.updateScoreboard(),this.bindEvents()};d.prototype.start=function(){this.started=!0,this.inst.start()},d.prototype.bindEvents=function(){var a=this;$(document).on("keydown",this.onKeydown.bind(this)),$(window).on("resize",this.onResize.bind(this)),this.inst.onRestart=function(b){a.onGameRestart(b)},this.inst.onScore=function(b){a.onGameScore(b)}},d.prototype.play=function(){this.started=!0,this.inst.play()},d.prototype.pause=function(){this.started=!1,this.inst.pause()},d.prototype.saveGame=function(a){var b=c.get(this.inst.name+"_user")||0;if(this.inst.bot&&this.inst.bot.enabled){var d=c.get(this.inst.name+"_bot")||0;d&&d>a&&(a=d),c.set(this.inst.name+"_bot",a)}else(!b||b&&a>b)&&c.set(this.inst.name+"_user",a)},d.prototype.updateScoreboard=function(a){this.updateScore(a||0),this.$scoreboard.find("#hi-score span").text(c.get(this.inst.name+"_user")||0),this.inst.bot&&this.$scoreboard.find("#bot-hi-score span").text(c.get(this.inst.name+"_bot")||0)},d.prototype.updateScore=function(a){var b=this.$scoreboard.find("#score span");b.text(a).addClass("flash"),setTimeout(function(){b.removeClass("flash")},1e3)},d.prototype.onKeydown=function(a){switch(a.keyCode){case 82:this.inst.restart();break;case 32:this.started?this.pause():this.play()}},d.prototype.onGameScore=function(a){this.updateScore(a)},d.prototype.onGameRestart=function(a){this.saveGame(a),this.updateScoreboard()},d.prototype.onResize=function(){"function"==typeof this.inst.onResize&&this.inst.onResize(window.innerHeight,window.innerWidth)},b.exports=d},{"./util/cookie":5}],2:[function(a,b){function c(a){this.options=a||{},this.x=this.options.x,this.y=this.options.y,this.radius=parseInt(5*Math.random()),this.color=!(Math.random()+.5|0)==!0?255:0,this.life=100,this.velocity={x:-5+10*Math.random(),y:-8+10*Math.random()}}c.prototype.getBWHex=function(){return"#"+(!(Math.random()+.5|0)==!0?"FFFFFF":"000000")},c.prototype.getColor=function(){return"#"+(16777215*Math.random()<<0).toString(16)},c.prototype.draw=function(a){this.life=~~(.96*this.life),this.radius=.96*this.radius,a.fillStyle="rgba("+this.color+","+this.color+","+this.color+", "+this.life/100,a.beginPath(),a.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),a.fill(),a.closePath()},b.exports=c},{}],3:[function(a,b){var c=a("./Particle"),d=(a("./util/cookie"),function(a){this.name="snake",this.score=0,this.started=!1,this.fps=15,this.gravity=1,this.particles=[],this.particleCount=150,this.canvas=$("canvas")[0],this.context=this.canvas.getContext("2d"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.animationTimeout=null,this.snakePieces=[],this.snakeFood=[],this.settings=$.extend({snakePixels:14,snakeSize:3,bot:!0},a),this.bot={},this.settings.bot&&this.enableBot(),this.DIRECTIONS={UP:0,DOWN:2,LEFT:3,RIGHT:1},this.direction=this.DIRECTIONS.RIGHT,this.directionQueue=[],this.bindEvents()});d.prototype.start=function(){this.started=!0,this.create(),this.createFood(),this.play()},d.prototype.reset=function(){this.started=!1,this.score=0,this.directionQueue=[],this.direction=this.DIRECTIONS.RIGHT,this.snakePieces=[],this.snakeFood=[],this.particles=[],this.gravity=1,this.fps=15,this.animationTimeout&&clearTimeout(this.animationTimeout)},d.prototype.restart=function(){"function"==typeof this.onRestart&&this.onRestart(this.score),this.reset(),this.start()},d.prototype.bindEvents=function(){$(document).on("keydown",this.onKeydown.bind(this))},d.prototype.play=function(){this.started=!0,"function"==typeof this.animationLoop&&this.animationLoop()},d.prototype.pause=function(){this.started=!1},d.prototype.lose=function(){var a=this;this.pause(),setTimeout(function(){a.restart()},3e3)},d.prototype.onKeydown=function(a){var b;switch(this.bot&&-1!==[38,40,37,39].indexOf(a.keyCode)&&this.disableBot(),a.keyCode){case 38:b=this.DIRECTIONS.UP;break;case 40:b=this.DIRECTIONS.DOWN;break;case 37:b=this.DIRECTIONS.LEFT;break;case 39:b=this.DIRECTIONS.RIGHT;break;case 66:this.enableBot();break;default:return}this.started&&this.directionQueue[this.directionQueue.length-1]!==b&&this.directionQueue.push(b)},d.prototype.onResize=function(a,b){this.canvas.width=b,this.canvas.height=a},d.prototype.create=function(){for(var a=0;a<this.settings.snakeSize;a++)this.snakePieces.push({x:0,y:20})},d.prototype.createFood=function(){this.snakeFood.push({x:Math.round(Math.random()*(this.canvas.width-this.settings.snakePixels)/this.settings.snakePixels),y:Math.round(Math.random()*(this.canvas.height-this.settings.snakePixels)/this.settings.snakePixels)})},d.prototype._getDirection=function(){for(var a;"undefined"==typeof a||(this.direction-a+4)%4==2;)a=this.directionQueue.length>0?this.directionQueue.shift():this.direction;return a},d.prototype.isWallCollision=function(a,b){var c=-1===b,d=a>=this.canvas.width/this.settings.snakePixels,e=b>=this.canvas.height/this.settings.snakePixels,f=-1===a;return c||d||e||f},d.prototype.isSelfCollision=function(a,b){for(var c=0;c<this.snakePieces.length;c++)if(this.snakePieces[c].x==a&&this.snakePieces[c].y==b)return!0;return!1},d.prototype.isFoodCollision=function(a,b){var c=!1;return this.snakeFood.forEach(function(d){a==d.x&&b==d.y&&(c=!0)}),c},d.prototype.removeFoodIfExists=function(a,b){var c=this;this.snakeFood.forEach(function(d,e){a==d.x&&b==d.y&&c.snakeFood.splice(e)})},d.prototype.drawSnake=function(){for(var a=0;a<this.snakePieces.length;a++){var b=this.snakePieces[a];this.drawPart(b.x,b.y)}},d.prototype.drawFood=function(){var a=this,b=this.settings.snakePixels;this.context.fillStyle="#ffffff",this.context.strokeStyle="#000000",this.snakeFood.forEach(function(c){a.context.fillRect(c.x*b,c.y*b,b,b),a.context.strokeRect(c.x*b,c.y*b,b,b)})},d.prototype.drawPart=function(a,b){var c=this.settings.snakePixels;this.context.fillStyle="#ffffff",this.context.strokeStyle="#000000",this.context.fillRect(a*c,b*c,c,c),this.context.strokeRect(a*c,b*c,c,c)},d.prototype.createExpolosion=function(a,b){for(var d=0;d<this.particleCount;d++){var e=new c({x:a*this.settings.snakePixels,y:b*this.settings.snakePixels});this.particles.push(e)}},d.prototype.drawLoop=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height);var a=this.snakePieces[0].x,b=this.snakePieces[0].y,c=this._getDirection();switch(this.direction=c,this.bot&&this.bot.enabled&&(this.direction=this.getNextMove()),this.direction){case this.DIRECTIONS.RIGHT:a++;break;case this.DIRECTIONS.LEFT:a--;break;case this.DIRECTIONS.DOWN:b++;break;case this.DIRECTIONS.UP:b--}this.isWallCollision(a,b)&&this.lose(),this.isSelfCollision(a,b)&&this.lose();var d={};this.started&&(this.isFoodCollision(a,b)?(this.scorePoint(),this.score%2&&(this.fps+=.5),this.removeFoodIfExists(a,b),this.createExpolosion(a,b),this.createFood(),d.x=a,d.y=b):(d=this.snakePieces.pop(),d.x=a,d.y=b),this.snakePieces.unshift(d)),this.drawSnake(),this.drawFood()},d.prototype.scorePoint=function(){this.score++,this.onScore&&"function"==typeof this.onScore&&this.onScore(this.score)},d.prototype.animationLoop=function(){if(this.started){var a=this;this.animationTimeout&&clearTimeout(this.animationTimeout),this.animationTimeout=setTimeout(function(){a.drawLoop.call(a),a.particleLoop.call(a),window.requestAnimationFrame(a.animationLoop.bind(a))},1e3/this.fps)}},d.prototype.particleLoop=function(){if(this.particles){var a=this;this.particles.forEach(function(b,c){b.velocity.y+=a.gravity,b.x+=b.velocity.x,b.y+=b.velocity.y,b.draw(a.context),b.y>1.1*this.canvas.height&&a.particles.splice(c)})}},d.prototype.enableBot=function(){this.bot.enabled=!0},d.prototype.disableBot=function(){this.bot.enabled=!1},d.prototype.isSafeMove=function(a,b){if(2===Math.abs(this.direction-b))return!1;switch(b){case this.DIRECTIONS.UP:a.y--;break;case this.DIRECTIONS.DOWN:a.y++;break;case this.DIRECTIONS.RIGHT:a.x++;break;case this.DIRECTIONS.LEFT:default:a.x--}var c=!0;return this.snakePieces.forEach(function(b){b.x===a.x&&b.y===a.y&&(c=!1)}),c},d.prototype.getPrelimDirection=function(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);return c>d?a.x>b.x?this.DIRECTIONS.LEFT:this.DIRECTIONS.RIGHT:a.y<b.y||0===a.y?this.DIRECTIONS.DOWN:this.DIRECTIONS.UP},d.prototype.getNextMove=function(){for(var a=this.snakeFood[0],b={x:this.snakePieces[0].x,y:this.snakePieces[0].y},c=0,d=this.getPrelimDirection(b,a);!this.isSafeMove(b,d)&&c++<=4;)d=(d+1)%4;return d},b.exports=d},{"./Particle":2,"./util/cookie":5}],4:[function(a){var b=a("./Game"),c=a("./Snake"),d={menuOpen:!1,game:new b({inst:new c}),start:function(){NProgress.done(),this.bindEvents(),setTimeout(function(){d.game.start()},3e3)},preloadImages:function(a,b){function c(){++d<=e&&b()}var d=0,e=0,f=a instanceof Array?[]:{};for(var g in a)f[g]=new Image,f[g].src=a[g],f[g].onload=c,f[g].onerror=c,f[g].onabort=c,e++},bindEvents:function(){$(window).focus(this.game.play.bind(this.game)).blur(this.game.pause.bind(this.game)),$(".js-menu").on("click",this.toggleMenu),$(window).on("keydown",this.onKeydown)},onKeydown:function(a){switch(a.keyCode){case 191:d.toggleMenu()}},toggleMenu:function(){$("#menu").slideToggle()}};$(document).ready(function(){var a=["/assets/img/bg.jpg"];d.preloadImages(a,function(){d.start()})})},{"./Game":1,"./Snake":3}],5:[function(a,b){b.exports={set:function(a,b,c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="expires="+d.toGMTString();document.cookie=a+"="+b+"; "+e},get:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].trim();if(0===d.indexOf(a))return d.substring(a.length,d.length)}return!1}}},{}]},{},[4]);